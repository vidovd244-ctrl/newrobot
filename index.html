robots.forEach(r=>{
    const pod = document.createElement("div");
    pod.className="pod";
    pod.innerHTML=`<img src="${r.img}"><div>${r.name}</div><div>${r.price}</div>`;
    
    let played = false; // تتبع ما إذا تم تشغيل الصوت
    pod.onclick = ()=>{
        if(played) return; // يمنع إعادة التشغيل

        // ايقاف الصوت الرئيسي فورًا
        mainAudio.pause();
        
        // إنشاء audio مستقل لكل كبسولة
        const audioPod = new Audio(r.sound);
        audioPod.play();
        
        // عرض النص الملحمي مرة واحدة فقط
        if(!playedText[r.name]){
            screen.innerHTML=`لقد اخترت ${r.name} - ${r.price}`;
            playedText[r.name]=true; 
        }
        
        played = true; // يمنع أي click لاحق لإعادة الصوت
        
        // تأثير بصري عند click
        pod.style.transform="scale(1.1)";
        setTimeout(()=>{pod.style.transform="scale(1)";},300);
    };
    robotPods.appendChild(pod);
});
